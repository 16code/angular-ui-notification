/**
 * angular-ui-notification - Angular.js service providing simple notifications using Bootstrap 3 styles with css transitions for animating
 * @author Alex_Crack
 * @version v0.1.0
 * @link https://github.com/alexcrack/angular-ui-notification
 * @license MIT
 */
angular.module("ui-notification",[]),angular.module("ui-notification").provider("Notification",function(){this.options={delay:5e3,startTop:10,startRight:10,verticalSpacing:10,horizontalSpacing:10,positionX:"right",positionY:"top",replaceMessage:!1,templateUrl:"angular-ui-notification.html"},this.setOptions=function(t){if(!angular.isObject(t))throw new Error("Options should be an object!");this.options=angular.extend({},this.options,t)},this.$get=["$timeout","$http","$compile","$templateCache","$rootScope","$injector","$sce","$q","$window",function(t,e,i,n,o,s,a,r,l){var p=this.options,c=p.startTop,d=p.startRight,u=p.verticalSpacing,f=p.horizontalSpacing,m=p.delay,g=[],h=!1,y=function(s,y){var v=r.defer();return"object"!=typeof s&&(s={message:s}),s.scope=s.scope?s.scope:o,s.template=s.templateUrl?s.templateUrl:p.templateUrl,s.delay=angular.isUndefined(s.delay)?m:s.delay,s.type=y||p.type||"",s.positionY=s.positionY?s.positionY:p.positionY,s.positionX=s.positionX?s.positionX:p.positionX,s.replaceMessage=s.replaceMessage?s.replaceMessage:p.replaceMessage,e.get(s.template,{cache:n}).success(function(e){function n(t){["-webkit-transition","-o-transition","transition"].forEach(function(e){p.css(e,t)})}var o=s.scope.$new();o.message=a.trustAsHtml(s.message),o.title=a.trustAsHtml(s.title),o.t=s.type.substr(0,1),o.delay=s.delay;var r=function(){for(var t=0,e=0,i=c,n=d,o=[],a=g.length-1;a>=0;a--){var r=g[a];if(s.replaceMessage&&a<g.length-1)r.addClass("killed");else{var l=parseInt(r[0].offsetHeight),p=parseInt(r[0].offsetWidth),m=o[r._positionY+r._positionX];h+l>window.innerHeight&&(m=c,e++,t=0);var h=i=m?0===t?m:m+u:c,y=n+e*(f+p);r.css(r._positionY,h+"px"),"center"==r._positionX?r.css("left",parseInt(window.innerWidth/2-p/2)+"px"):r.css(r._positionX,y+"px"),o[r._positionY+r._positionX]=h+l,t++}}},p=i(e)(o);p._positionY=s.positionY,p._positionX=s.positionX,p.addClass(s.type),p.bind("webkitTransitionEnd oTransitionEnd otransitionend transitionend msTransitionEnd click",function(t){t=t.originalEvent||t,("click"===t.type||"opacity"===t.propertyName&&t.elapsedTime>=1)&&(p.remove(),g.splice(g.indexOf(p),1),o.$destroy(),r())}),angular.isNumber(s.delay)&&t(function(){p.addClass("killed")},s.delay),n("none"),angular.element(document.getElementsByTagName("body")).append(p);var m=-(parseInt(p[0].offsetHeight)+50);if(p.css(p._positionY,m+"px"),g.push(p),"center"==s.positionX){var y=parseInt(p[0].offsetWidth);p.css("left",parseInt(window.innerWidth/2-y/2)+"px")}t(function(){n("")}),o._templateElement=p,o.kill=function(e){e?(g.splice(g.indexOf(o._templateElement),1),o._templateElement.remove(),o.$destroy(),t(r)):o._templateElement.addClass("killed")},t(r),h||(angular.element(l).bind("resize",function(e){t(r)}),h=!0),v.resolve(o)}).error(function(t){throw new Error("Template ("+s.template+") could not be loaded. "+t)}),v.promise};return y.primary=function(t){return this(t,"primary")},y.error=function(t){return this(t,"error")},y.success=function(t){return this(t,"success")},y.info=function(t){return this(t,"info")},y.warning=function(t){return this(t,"warning")},y.clearAll=function(){angular.forEach(g,function(t){t.addClass("killed")})},y}]}),angular.module("ui-notification").run(["$templateCache",function(t){t.put("angular-ui-notification.html",'<div class="ui-notification"><h3 ng-show="title" ng-bind-html="title"></h3><div class="message" ng-bind-html="message"></div></div>')}]);